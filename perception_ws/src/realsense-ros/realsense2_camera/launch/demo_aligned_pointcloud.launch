<launch>
  <!-- Common arguments -->
  <arg name="serial_no" default=""/>
  <arg name="json_file_path" default=""/>
  <arg name="camera" default="camera"/>
  <arg name="tf_prefix" default="$(arg camera)"/>

  <!-- Depth and color resolution and framerate -->
  <arg name="depth_width" value="640"/>
  <arg name="depth_height" value="480"/>
  <arg name="depth_fps" value="5"/>
  <arg name="color_width" value="640"/>
  <arg name="color_height" value="480"/>
  <arg name="color_fps" value="5"/>

  <!-- Enable/disable various streams -->
  <arg name="enable_depth" value="true"/>
  <arg name="enable_color" value="true"/>
  <arg name="enable_infra1" value="false"/>
  <arg name="enable_infra2" value="false"/>
  <arg name="enable_fisheye" value="false"/>
  <arg name="enable_gyro" value="true"/>
  <arg name="enable_accel" value="true"/>

  <!-- Enable point cloud and synchronization -->
  <arg name="enable_pointcloud" value="true"/>
  <arg name="enable_sync" value="true"/>
  <arg name="align_depth" value="true"/>

  <group ns="$(arg camera)">
    <!-- Include the nodelet launch file -->
    <include file="$(find realsense2_camera)/launch/includes/nodelet.launch.xml">
      <arg name="tf_prefix" value="$(arg tf_prefix)"/>
      <arg name="serial_no" value="$(arg serial_no)"/>
      <arg name="json_file_path" value="$(arg json_file_path)"/>

      <arg name="depth_width" value="$(arg depth_width)"/>
      <arg name="depth_height" value="$(arg depth_height)"/>
      <arg name="depth_fps" value="$(arg depth_fps)"/>
      <arg name="color_width" value="$(arg color_width)"/>
      <arg name="color_height" value="$(arg color_height)"/>
      <arg name="color_fps" value="$(arg color_fps)"/>

      <arg name="enable_depth" value="$(arg enable_depth)"/>
      <arg name="enable_color" value="$(arg enable_color)"/>
      <arg name="enable_infra1" value="$(arg enable_infra1)"/>
      <arg name="enable_infra2" value="$(arg enable_infra2)"/>
      <arg name="enable_fisheye" value="$(arg enable_fisheye)"/>
      <arg name="enable_gyro" value="$(arg enable_gyro)"/>
      <arg name="enable_accel" value="$(arg enable_accel)"/>

      <arg name="enable_pointcloud" value="$(arg enable_pointcloud)"/>
      <arg name="enable_sync" value="$(arg enable_sync)"/>
      <arg name="align_depth" value="$(arg align_depth)"/>
    </include>

    <!-- Launch RViz for visualization -->
    <node name="rviz" pkg="rviz" type="rviz" args="-d $(find realsense2_camera)/rviz/pointcloud.rviz" required="true" />
  </group>
</launch>
